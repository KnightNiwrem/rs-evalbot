#!/usr/bin/env node

var util = require('util');
var vm = require('vm');
var net = require('net');
var fs = require('fs');

var ctr = 0;
var conns = {};

const srclib = String.raw`const util=require('util');function display(e){console.log(e)}function error_message(e){const u=util.inspect(e);throw new Error(u)}var error=error_message;function is_number(e){return'number'==typeof e}function is_undefined(e){return'undefined'==typeof e}function is_string(e){return'string'==typeof e}function is_boolean(e){return'boolean'==typeof e}function is_object(e){return'object'==typeof e||is_function(e)}function is_function(e){return'function'==typeof e}function is_NaN(e){return is_number(e)&&isNaN(e)}function has_own_property(e,u){return e.hasOwnProperty(u)}function is_array(e){return e instanceof Array}function array_length(e){return e.length}function parse_int(e,u){if('string'==typeof e&&'number'==typeof u&&Number.isInteger(u)&&2<=u&&36>=u)return parseInt(e,u);throw new Error('parse_int expects two arguments a string s, and a positive integer i between 2 and 36, inclusive.')}function runtime(){return new Date().getTime()}function apply_in_underlying_javascript(e,u){const d=[];for(var g=0;0!==u.length;)d[g]=u[0],++g,u=u[1];return e.apply(e,d)}function array_test(e){return void 0===Array.isArray?e instanceof Array:Array.isArray(e)}function pair(e,u){return[e,u]}function is_pair(e){return array_test(e)&&2===e.length}function head(e){if(is_pair(e))return e[0];throw new Error('head(xs) expects a pair as argument xs, but encountered '+e)}function tail(e){if(is_pair(e))return e[1];throw new Error('tail(xs) expects a pair as argument xs, but encountered '+e)}function is_empty_list(e){if(array_test(e)){if(0===e.length)return!0;if(2===e.length)return!1;throw new Error('is_empty_list(xs) expects empty list or pair as argument xs, but encountered '+e)}else return!1}function is_list(e){for(;;e=tail(e)){if(is_empty_list(e))return!0;if(!is_pair(e))return!1}}function list(){for(var e=[],u=arguments.length-1;0<=u;u--)e=pair(arguments[u],e);return e}function list_to_vector(e){for(var u=[];!is_empty_list(e);)u.push(head(e)),e=tail(e);return u}function vector_to_list(e){if(0===e.length)return[];for(var u=[],d=e.length-1;0<=d;--d)u=pair(e[d],u);return u}function length(e){for(var u=0;!is_empty_list(e);++u)e=tail(e);return u}function map(e,u){return is_empty_list(u)?[]:pair(e(head(u)),map(e,tail(u)))}function build_list(e,u){function d(g,m,_){return 0>g?_:d(g-1,m,pair(m(g),_))}return d(e-1,u,[])}function for_each(e,u){if(!is_list(u))throw new Error('for_each expects a list as argument xs, but encountered '+u);for(;!is_empty_list(u);u=tail(u))e(head(u));return!0}function list_to_string(e){return array_test(e)&&0===e.length?'[]':is_pair(e)?'['+list_to_string(head(e))+','+list_to_string(tail(e))+']':e.toString()}function reverse(e){if(!is_list(e))throw new Error('reverse(xs) expects a list as argument xs, but encountered '+e);for(var u=[];!is_empty_list(e);e=tail(e))u=pair(head(e),u);return u}function append(e,u){return is_empty_list(e)?u:pair(head(e),append(tail(e),u))}function member(e,u){for(;!is_empty_list(u);u=tail(u))if(head(u)===e)return u;return[]}function remove(e,u){return is_empty_list(u)?[]:e===head(u)?tail(u):pair(head(u),remove(e,tail(u)))}function remove_all(e,u){return is_empty_list(u)?[]:e===head(u)?remove_all(e,tail(u)):pair(head(u),remove_all(e,tail(u)))}var removeAll=remove_all;function equal(e,u){return is_pair(e)&&is_pair(u)?equal(head(e),head(u))&&equal(tail(e),tail(u)):array_test(e)&&0===e.length&&array_test(u)&&0===u.length||e===u}function assoc(e,u){return!is_empty_list(u)&&(equal(e,head(head(u)))?head(u):assoc(e,tail(u)))}function filter(e,u){return is_empty_list(u)?u:e(head(u))?pair(head(u),filter(e,tail(u))):filter(e,tail(u))}function enum_list(e,u){return e>u?[]:pair(e,enum_list(e+1,u))}function list_ref(e,u){if(0>u)throw new Error('list_ref(xs, n) expects a positive integer as argument n, but encountered '+u);for(;0<u;--u)e=tail(e);return head(e)}function accumulate(e,u,d){return is_empty_list(d)?u:e(head(d),accumulate(e,u,tail(d)))}function set_head(e,u){if(is_pair(e))return e[0]=u,void 0;throw new Error('set_head(xs,x) expects a pair as argument xs, but encountered '+e)}function set_tail(e,u){if(is_pair(e))return e[1]=u,void 0;throw new Error('set_tail(xs,x) expects a pair as argument xs, but encountered '+e)}function take(e,u){if(0>u)throw new Error('take(xs, n) expects a positive integer as argument n, but encountered '+u);return 0===u?[]:pair(head(e),take(tail(e),u-1))}function drop(e,u){if(0>u)throw new Error('drop(xs, n) expects a positive integer as argument n, but encountered '+u);return 0===u?e:drop(tail(e),u-1)}function make_empty_binary_tree(){return[]}function is_binary_tree(e){return is_empty_binary_tree(e)||3===length(e)&&is_binary_tree(left_subtree_of(e))&&is_binary_tree(right_subtree_of(e))}function make_binary_tree_node(e,u,d){if(!is_binary_tree(e))throw new Error('Left subtree is not a valid binary tree');else if(!is_binary_tree(d))throw new Error('Right subtree is not a valid binary tree');return list(e,u,d)}function is_empty_binary_tree(e){return is_empty_list(e)}function left_subtree_of(e){return list_ref(e,0)}function value_of(e){return list_ref(e,1)}function right_subtree_of(e){return list_ref(e,2)}function stream_tail(e){var u;if(is_pair(e))u=e[1];else throw new Error('stream_tail(xs) expects a pair as argument xs, but encountered '+e);if('function'==typeof u)return u();throw new Error('stream_tail(xs) expects a function as the tail of the argument pair xs, but encountered '+u)}function is_stream(e){return array_test(e)&&0===e.length||is_pair(e)&&'function'==typeof tail(e)&&is_stream(stream_tail(e))}function list_to_stream(e){return is_empty_list(e)?[]:pair(head(e),function(){return list_to_stream(tail(e))})}function stream_to_list(e){return is_empty_list(e)?[]:pair(head(e),stream_to_list(stream_tail(e)))}function stream(){for(var e=[],u=arguments.length-1;0<=u;u--)e=pair(arguments[u],e);return list_to_stream(e)}function stream_length(e){return is_empty_list(e)?0:1+stream_length(stream_tail(e))}function stream_map(e,u){return is_empty_list(u)?[]:pair(e(head(u)),function(){return stream_map(e,stream_tail(u))})}function build_stream(e,u){function d(g){return g>=e?[]:pair(u(g),function(){return d(g+1)})}return d(0)}function stream_for_each(e,u){return!!is_empty_list(u)||(e(head(u)),stream_for_each(e,stream_tail(u)))}function stream_reverse(e){function u(d,g){return is_empty_list(d)?g:u(stream_tail(d),pair(head(d),function(){return g}))}return u(e,[])}function stream_to_vector(e){for(var u=[];!is_empty_list(e);)u.push(head(e)),e=stream_tail(e);return u}function stream_append(e,u){return is_empty_list(e)?u:pair(head(e),function(){return stream_append(stream_tail(e),u)})}function stream_member(e,u){return is_empty_list(u)?[]:head(u)===e?u:stream_member(e,stream_tail(u))}function stream_remove(e,u){return is_empty_list(u)?[]:e===head(u)?stream_tail(u):pair(head(u),function(){return stream_remove(e,stream_tail(u))})}function stream_remove_all(e,u){return is_empty_list(u)?[]:e===head(u)?stream_remove_all(e,stream_tail(u)):pair(head(u),function(){return stream_remove_all(e,stream_tail(u))})}function stream_filter(e,u){return is_empty_list(u)?[]:e(head(u))?pair(head(u),function(){return stream_filter(e,stream_tail(u))}):stream_filter(e,stream_tail(u))}function enum_stream(e,u){return e>u?[]:pair(e,function(){return enum_stream(e+1,u)})}function integers_from(e){return pair(e,function(){return integers_from(e+1)})}function eval_stream(e,u){return 0===u?[]:pair(head(e),eval_stream(stream_tail(e),u-1))}function stream_ref(e,u){return 0===u?head(e):stream_ref(stream_tail(e),u-1)}function is_array(e){return void 0===Array.isArray?e instanceof Array:Array.isArray(e)}function map_array(e,u){let d=[],g=u.length;for(let m=0;m<g;m++)d.push(e(u[m]));return d}function accumulate_array(e,u,d){for(let g=0;g<d.length;g++)u=e(d[g],u);return u}function filter_array(e,u){let d=[];for(let g=0;g<u.length;g++)e(u[g])&&d.push(u[g]);return d}function enum_array(e,u){let d=[];for(;e<=u;e++)d.push(e);return d}function take_array(e,u){let d=[],g=e.length;for(let m=0;m<u;++m)d[m]=e[m];return d}function drop_array(e,u){let d=[],g=e.length;for(let m=u;m<g;++m)d.push(e[m]);return d}var parse=function(){var e=function(){function u(){this.yy={}}var d=function(Pe,je,Te,Le){for(Te=Te||{},Le=Pe.length;Le--;Te[Pe[Le]]=je);return Te},g=[2,2],m=[1,3],_=[1,8],h=[1,25],$=[1,11],S=[1,14],I=[1,15],E=[1,16],w=[1,21],A=[1,20],N=[1,17],P=[1,18],j=[1,19],T=[1,23],L=[1,22],O=[1,24],Q=[1,28],U=[1,29],F=[1,30],R=[1,31],q=[1,32],B=[1,33],M=[1,34],D=[1,36],z=[1,38],V=[1,39],Y=[1,40],C=[1,37],G=[5,17],H=[5,6,11,13,16,17,22,23,24,25,27,28,30,31,34,35,39,49,57,58,59,60,61,62,64,65,66,67,73],J=[1,51],K=[1,52],W=[1,53],X=[1,54],Z=[1,55],ee=[1,56],ne=[1,57],te=[1,58],ie=[1,59],ae=[1,60],le=[1,61],oe=[1,62],re=[1,63],se=[1,64],ce=[1,65],ue=[1,66],de=[1,67],pe=[1,68],ye=[1,70],ge=[2,78],fe=[6,15,17,26,34,35,36,37,38,40,41,42,43,44,45,46,47,48,49,50,51,55,56,69],me=[2,49],_e=[1,85],he=[2,69],be=[1,95],$e=[6,15,17,26,34,35,36,37,38,40,41,42,43,44,45,46,47,48,50,55,56,69],xe=[1,126],ke=[15,50],Se=[6,15,17,26,34,35,40,41,42,43,44,45,46,47,48,50,55,56,69],ve=[6,15,17,26,40,41,42,43,48,50,55,56,69],Ie=[6,15,17,26,40,41,42,43,44,45,46,47,48,50,55,56,69],Ee=[6,15,17,26,48,50,56,69],we=[13,16,34,35,39,49,57,58,59,60,61,62,64,65,66,67,73],Ae={trace:function(){},yy:{},symbols_:{error:2,program:3,statements:4,EOF:5,';':6,statement:7,ifstatement:8,whilestatement:9,forstatement:10,'function':11,identifier:12,'(':13,identifiers:14,')':15,'{':16,'}':17,constdeclaration:18,letdeclaration:19,assignment:20,expression:21,'return':22,'break':23,'continue':24,'let':25,'=':26,'const':27,'if':28,'else':29,'while':30,'for':31,forinitialiser:32,forfinaliser:33,'+':34,'-':35,'*':36,'/':37,'%':38,'!':39,'&&':40,'||':41,'===':42,'!==':43,'>':44,'<':45,'>=':46,'<=':47,'=>':48,'[':49,']':50,'.':51,constants:52,expressions:53,pairs:54,'?':55,':':56,FLOAT_NUMBER:57,INT_NUMBER:58,'true':59,'false':60,NaN:61,Infinity:62,quotedstring:63,emptylist:64,EmptyString:65,QuotedString:66,QuotedStringEscape:67,nonemptyexpressions:68,',':69,nonemptypairs:70,pair:71,nonemptyidentifiers:72,Identifier:73,$accept:0,$end:1},terminals_:{2:'error',5:'EOF',6:';',11:'function',13:'(',15:')',16:'{',17:'}',22:'return',23:'break',24:'continue',25:'let',26:'=',27:'const',28:'if',29:'else',30:'while',31:'for',34:'+',35:'-',36:'*',37:'/',38:'%',39:'!',40:'&&',41:'||',42:'===',43:'!==',44:'>',45:'<',46:'>=',47:'<=',48:'=>',49:'[',50:']',51:'.',55:'?',56:':',57:'FLOAT_NUMBER',58:'INT_NUMBER',59:'true',60:'false',61:'NaN',62:'Infinity',64:'emptylist',65:'EmptyString',66:'QuotedString',67:'QuotedStringEscape',69:',',73:'Identifier'},productions_:[0,[3,2],[4,0],[4,1],[4,2],[7,1],[7,1],[7,1],[7,8],[7,1],[7,1],[7,3],[7,2],[7,2],[7,3],[7,2],[7,2],[19,5],[18,5],[20,3],[8,11],[8,9],[9,7],[10,10],[32,1],[32,2],[33,1],[21,3],[21,3],[21,3],[21,3],[21,3],[21,2],[21,2],[21,2],[21,3],[21,3],[21,3],[21,3],[21,3],[21,3],[21,3],[21,3],[21,5],[21,3],[21,4],[21,3],[21,3],[21,1],[21,1],[21,6],[21,3],[21,3],[21,4],[21,5],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[63,1],[63,1],[63,1],[63,2],[63,2],[53,1],[53,0],[68,3],[68,1],[54,1],[54,0],[70,3],[70,1],[71,3],[14,1],[14,0],[72,3],[72,1],[12,1]],performAction:function(je,Te,Le,Oe,Qe,Ue,Fe){var Re=Ue.length-1;switch(Qe){case 1:return Ue[Re-1];break;case 2:case 3:case 69:case 73:case 78:this.$=[];break;case 4:this.$=[Ue[Re-1],Ue[Re]];break;case 8:this.$={tag:'constant_declaration',name:Ue[Re-6],value:{tag:'function_definition',parameters:Ue[Re-4],body:Ue[Re-1],line:Le,location:{start_line:Fe[Re-7].first_line,start_col:Fe[Re-7].first_column,end_line:Fe[Re].first_line,end_col:Fe[Re].first_column}},line:Le};break;case 11:this.$={tag:'block',body:Ue[Re-1]};break;case 14:this.$={tag:'return_statement',expression:Ue[Re-1],line:Le};break;case 15:this.$={tag:'break_statement',line:Le};break;case 16:this.$={tag:'continue_statement',line:Le};break;case 17:this.$={tag:'variable_declaration',name:Ue[Re-3],value:Ue[Re-1],line:Le};break;case 18:this.$={tag:'constant_declaration',name:Ue[Re-3],value:Ue[Re-1],line:Le};break;case 19:'name'===Ue[Re-2].tag?this.$={tag:'assignment',name:Ue[Re-2],value:Ue[Re],line:Le}:'property_access'===Ue[Re-2].tag?this.$={tag:'property_assignment',object:Ue[Re-2].object,property:Ue[Re-2].property,value:Ue[Re],line:Le}:error('parse error in line '+Le+': '+je);break;case 20:this.$={tag:'conditional_statement',predicate:Ue[Re-8],consequent:{tag:'block',body:Ue[Re-5]},alternative:{tag:'block',body:Ue[Re-1]},line:Le};break;case 21:this.$={tag:'conditional_statement',predicate:Ue[Re-6],consequent:{tag:'block',body:Ue[Re-3]},alternative:[Ue[Re],[]],line:Le};break;case 22:this.$={tag:'while_loop',predicate:Ue[Re-4],statements:{tag:'block',body:Ue[Re-1]},line:Le};break;case 23:this.$={tag:'for_loop',initialiser:Ue[Re-7],predicate:Ue[Re-6],finaliser:Ue[Re-4],statements:{tag:'block',body:Ue[Re-1]},line:Le};break;case 27:case 28:case 29:case 30:case 31:case 37:case 38:case 39:case 40:case 41:case 42:this.$={tag:'application',operator:{tag:'name',name:Ue[Re-1],line:Le},operands:[Ue[Re-2],[Ue[Re],[]]],line:Le};break;case 32:case 33:this.$={tag:'application',operator:{tag:'name',name:Ue[Re-1],line:Le},operands:[0,[Ue[Re],[]]],line:Le};break;case 34:this.$={tag:'application',operator:{tag:'name',name:Ue[Re-1],line:Le},operands:[Ue[Re],[]],line:Le};break;case 35:case 36:this.$={tag:'boolean_operation',operator:Ue[Re-1],operands:[Ue[Re-2],[Ue[Re],[]]],line:Le};break;case 43:this.$={tag:'function_definition',parameters:Ue[Re-3],body:{tag:'return_statement',expression:Ue[Re],line:Le},line:Le,location:{start_line:Fe[Re-4].first_line,start_col:Fe[Re-4].first_column,end_line:Fe[Re].first_line,end_col:Fe[Re].first_column}};break;case 44:'name'===Ue[Re-2].tag?this.$={tag:'function_definition',parameters:[Ue[Re-2],[]],body:{tag:'return_statement',expression:Ue[Re],line:Le},line:Le,location:{start_line:Fe[Re-2].first_line,start_col:Fe[Re-2].first_column,end_line:Fe[Re-2].first_line,end_col:Fe[Re-2].first_column}}:error('expecting name before => '+Le+': '+je);break;case 45:this.$={tag:'property_access',object:Ue[Re-3],property:Ue[Re-1],line:Le};break;case 46:this.$={tag:'property_access',object:Ue[Re-2],property:Ue[Re],line:Le};break;case 47:this.$=Ue[Re-1];break;case 49:this.$={tag:'name',name:Ue[Re],line:Le};break;case 50:this.$={tag:'application',operator:Ue[Re-4],operands:Ue[Re-1],line:Le};break;case 51:this.$={tag:'array_expression',elements:Ue[Re-1],line:Le};break;case 52:this.$={tag:'object_expression',pairs:Ue[Re-1],line:Le};break;case 53:this.$={tag:'application',operator:{tag:'name',name:Ue[Re-3],line:Le},operands:Ue[Re-1],line:Le};break;case 54:this.$={tag:'conditional_expression',predicate:Ue[Re-4],consequent:Ue[Re-2],alternative:Ue[Re],line:Le};break;case 55:this.$=parseFloat(je);break;case 56:this.$=parseInt(je,10);break;case 57:this.$=!0;break;case 58:this.$=!1;break;case 59:this.$=NaN;break;case 60:this.$=Infinity;break;case 62:this.$={tag:'empty_list',line:Le};break;case 63:this.$='';break;case 65:this.$='b'===je?'\b':'n'===je?'\n':'r'===je?'\r':'t'===je?'\t':'\''===je?'\'':'"'===je?'"':'\\'===je?'\\':'\n'===je||'\r\n'===je?'':'\\'+Ue[Re];break;case 66:switch(Ue[Re-1]){case'b':this.$='\b';break;case'n':this.$='\n';break;case'r':this.$='\r';break;case't':this.$='\t';break;case'\'':this.$='\'';break;case'"':this.$='"';break;case'\\':this.$='\\';break;case'\n':case'\r\n':this.$='';break;default:this.$='\\'+Ue[Re-1];}this.$+=Ue[Re];break;case 67:this.$=Ue[Re-1]+Ue[Re];break;case 68:case 72:case 77:this.$=Ue[Re];break;case 70:case 74:case 76:case 79:this.$=[Ue[Re-2],Ue[Re]];break;case 71:case 75:case 80:this.$=[Ue[Re],[]];break;case 81:this.$=je;}},table:[{3:1,4:2,5:g,6:m,7:4,8:5,9:6,10:7,11:_,12:27,13:h,16:$,18:9,19:10,20:12,21:13,22:S,23:I,24:E,25:w,27:A,28:N,30:P,31:j,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{1:[3]},{5:[1,41]},d(G,[2,3]),d(G,g,{7:4,8:5,9:6,10:7,18:9,19:10,20:12,21:13,52:26,12:27,63:35,4:42,6:m,11:_,13:h,16:$,22:S,23:I,24:E,25:w,27:A,28:N,30:P,31:j,34:T,35:L,39:O,49:Q,57:U,58:F,59:R,60:q,61:B,62:M,64:D,65:z,66:V,67:Y,73:C}),d(H,[2,5]),d(H,[2,6]),d(H,[2,7]),{12:43,73:C},d(H,[2,9]),d(H,[2,10]),{4:44,6:m,7:4,8:5,9:6,10:7,11:_,12:48,13:h,16:$,17:g,18:9,19:10,20:12,21:13,22:S,23:I,24:E,25:w,27:A,28:N,30:P,31:j,34:T,35:L,39:O,49:Q,52:26,54:45,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,70:46,71:47,73:C},{6:[1,49]},{6:[1,50],26:J,34:K,35:W,36:X,37:Z,38:ee,40:ne,41:te,42:ie,43:ae,44:le,45:oe,46:re,47:se,48:ce,49:ue,51:de,55:pe},{12:27,13:h,16:ye,21:69,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{6:[1,71]},{6:[1,72]},{13:[1,73]},{13:[1,74]},{13:[1,75]},{12:76,73:C},{12:77,73:C},{12:27,13:h,16:ye,21:78,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:79,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:80,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:84,13:h,14:81,15:ge,16:ye,21:82,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,72:83,73:C},d(fe,[2,48]),d(fe,me,{13:_e}),{12:27,13:h,16:ye,21:88,34:T,35:L,39:O,49:Q,50:he,52:26,53:86,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,68:87,73:C},d(fe,[2,55]),d(fe,[2,56]),d(fe,[2,57]),d(fe,[2,58]),d(fe,[2,59]),d(fe,[2,60]),d(fe,[2,61]),d(fe,[2,62]),d([6,13,15,17,26,34,35,36,37,38,40,41,42,43,44,45,46,47,48,49,50,51,55,56,69],[2,81]),d(fe,[2,63]),d(fe,[2,64],{63:89,65:z,66:V,67:Y}),d(fe,[2,65],{63:90,65:z,66:V,67:Y}),{1:[2,1]},d(G,[2,4]),{13:[1,91]},{17:[1,92]},{17:[1,93]},{17:[2,72]},{17:[2,75],69:[1,94]},d([6,26,34,35,36,37,38,40,41,42,43,44,45,46,47,48,49,51,55],me,{13:_e,56:be}),d(H,[2,12]),d(H,[2,13]),{12:27,13:h,16:ye,21:96,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:97,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:98,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:99,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:100,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:101,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:102,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:103,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:104,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:105,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:106,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:107,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:108,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:109,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:110,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:111,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:112,73:C},{12:27,13:h,16:ye,21:113,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{6:[1,114],34:K,35:W,36:X,37:Z,38:ee,40:ne,41:te,42:ie,43:ae,44:le,45:oe,46:re,47:se,48:ce,49:ue,51:de,55:pe},{12:115,17:[2,73],54:45,70:46,71:47,73:C},d(H,[2,15]),d(H,[2,16]),{12:27,13:h,16:ye,21:116,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:117,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,19:119,20:120,21:121,25:w,32:118,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{26:[1,122]},{26:[1,123]},d($e,[2,32],{49:ue,51:de}),d($e,[2,33],{49:ue,51:de}),d($e,[2,34],{49:ue,51:de}),{15:[1,124]},{15:[1,125],34:K,35:W,36:X,37:Z,38:ee,40:ne,41:te,42:ie,43:ae,44:le,45:oe,46:re,47:se,48:ce,49:ue,51:de,55:pe},{15:[2,77]},d([15,34,35,36,37,38,40,41,42,43,44,45,46,47,48,49,51,55],me,{13:_e,69:xe}),{12:27,13:h,15:he,16:ye,21:88,34:T,35:L,39:O,49:Q,52:26,53:127,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,68:87,73:C},{50:[1,128]},d(ke,[2,68]),d(ke,[2,71],{34:K,35:W,36:X,37:Z,38:ee,40:ne,41:te,42:ie,43:ae,44:le,45:oe,46:re,47:se,48:ce,49:ue,51:de,55:pe,69:[1,129]}),d(fe,[2,67]),d(fe,[2,66]),{12:131,14:130,15:ge,72:83,73:C},d(H,[2,11]),d(fe,[2,52]),{12:115,70:132,71:47,73:C},{12:27,13:h,16:ye,21:133,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},d([6,15],[2,19],{34:K,35:W,36:X,37:Z,38:ee,40:ne,41:te,42:ie,43:ae,44:le,45:oe,46:re,47:se,48:ce,49:ue,51:de,55:pe}),d(Se,[2,27],{36:X,37:Z,38:ee,49:ue,51:de}),d(Se,[2,28],{36:X,37:Z,38:ee,49:ue,51:de}),d($e,[2,29],{49:ue,51:de}),d($e,[2,30],{49:ue,51:de}),d($e,[2,31],{49:ue,51:de}),d([6,15,17,26,40,41,48,50,55,56,69],[2,35],{34:K,35:W,36:X,37:Z,38:ee,42:ie,43:ae,44:le,45:oe,46:re,47:se,49:ue,51:de}),d([6,15,17,26,41,48,50,55,56,69],[2,36],{34:K,35:W,36:X,37:Z,38:ee,40:ne,42:ie,43:ae,44:le,45:oe,46:re,47:se,49:ue,51:de}),d(ve,[2,37],{34:K,35:W,36:X,37:Z,38:ee,44:le,45:oe,46:re,47:se,49:ue,51:de}),d(ve,[2,38],{34:K,35:W,36:X,37:Z,38:ee,44:le,45:oe,46:re,47:se,49:ue,51:de}),d(Ie,[2,39],{34:K,35:W,36:X,37:Z,38:ee,49:ue,51:de}),d(Ie,[2,40],{34:K,35:W,36:X,37:Z,38:ee,49:ue,51:de}),d(Ie,[2,41],{34:K,35:W,36:X,37:Z,38:ee,49:ue,51:de}),d(Ie,[2,42],{34:K,35:W,36:X,37:Z,38:ee,49:ue,51:de}),d(Ee,[2,44],{34:K,35:W,36:X,37:Z,38:ee,40:ne,41:te,42:ie,43:ae,44:le,45:oe,46:re,47:se,49:ue,51:de,55:pe}),{34:K,35:W,36:X,37:Z,38:ee,40:ne,41:te,42:ie,43:ae,44:le,45:oe,46:re,47:se,48:ce,49:ue,50:[1,134],51:de,55:pe},d(fe,[2,46]),{34:K,35:W,36:X,37:Z,38:ee,40:ne,41:te,42:ie,43:ae,44:le,45:oe,46:re,47:se,48:ce,49:ue,51:de,55:pe,56:[1,135]},d(H,[2,14]),{56:be},{15:[1,136],34:K,35:W,36:X,37:Z,38:ee,40:ne,41:te,42:ie,43:ae,44:le,45:oe,46:re,47:se,48:ce,49:ue,51:de,55:pe},{15:[1,137],34:K,35:W,36:X,37:Z,38:ee,40:ne,41:te,42:ie,43:ae,44:le,45:oe,46:re,47:se,48:ce,49:ue,51:de,55:pe},{12:27,13:h,16:ye,21:138,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},d(we,[2,24]),{6:[1,139]},{26:J,34:K,35:W,36:X,37:Z,38:ee,40:ne,41:te,42:ie,43:ae,44:le,45:oe,46:re,47:se,48:ce,49:ue,51:de,55:pe},{12:27,13:h,16:ye,21:140,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,21:141,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{48:[1,142]},d(fe,[2,47],{13:[1,143]}),{12:131,72:144,73:C},{15:[1,145]},d(fe,[2,51]),{12:27,13:h,16:ye,21:88,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,68:146,73:C},{15:[1,147]},{15:[2,80],69:xe},{17:[2,74]},d([17,69],[2,76],{34:K,35:W,36:X,37:Z,38:ee,40:ne,41:te,42:ie,43:ae,44:le,45:oe,46:re,47:se,48:ce,49:ue,51:de,55:pe}),d(fe,[2,45]),{12:27,13:h,16:ye,21:148,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{16:[1,149]},{16:[1,150]},{6:[1,151],34:K,35:W,36:X,37:Z,38:ee,40:ne,41:te,42:ie,43:ae,44:le,45:oe,46:re,47:se,48:ce,49:ue,51:de,55:pe},d(we,[2,25]),{6:[1,152],34:K,35:W,36:X,37:Z,38:ee,40:ne,41:te,42:ie,43:ae,44:le,45:oe,46:re,47:se,48:ce,49:ue,51:de,55:pe},{6:[1,153],34:K,35:W,36:X,37:Z,38:ee,40:ne,41:te,42:ie,43:ae,44:le,45:oe,46:re,47:se,48:ce,49:ue,51:de,55:pe},{12:27,13:h,16:ye,21:154,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,15:he,16:ye,21:88,34:T,35:L,39:O,49:Q,52:26,53:155,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,68:87,73:C},{15:[2,79]},d(fe,[2,53]),d(ke,[2,70]),{16:[1,156]},d(Ee,[2,54],{34:K,35:W,36:X,37:Z,38:ee,40:ne,41:te,42:ie,43:ae,44:le,45:oe,46:re,47:se,49:ue,51:de,55:pe}),{4:157,6:m,7:4,8:5,9:6,10:7,11:_,12:27,13:h,16:$,17:g,18:9,19:10,20:12,21:13,22:S,23:I,24:E,25:w,27:A,28:N,30:P,31:j,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{4:158,6:m,7:4,8:5,9:6,10:7,11:_,12:27,13:h,16:$,17:g,18:9,19:10,20:12,21:13,22:S,23:I,24:E,25:w,27:A,28:N,30:P,31:j,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{12:27,13:h,16:ye,20:160,21:121,33:159,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},d(H,[2,18]),d(H,[2,17]),d(Ee,[2,43],{34:K,35:W,36:X,37:Z,38:ee,40:ne,41:te,42:ie,43:ae,44:le,45:oe,46:re,47:se,49:ue,51:de,55:pe}),{15:[1,161]},{4:162,6:m,7:4,8:5,9:6,10:7,11:_,12:27,13:h,16:$,17:g,18:9,19:10,20:12,21:13,22:S,23:I,24:E,25:w,27:A,28:N,30:P,31:j,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{17:[1,163]},{17:[1,164]},{15:[1,165]},{15:[2,26]},d(fe,[2,50]),{17:[1,166]},{29:[1,167]},d(H,[2,22]),{16:[1,168]},d(H,[2,8]),{8:170,16:[1,169],28:N},{4:171,6:m,7:4,8:5,9:6,10:7,11:_,12:27,13:h,16:$,17:g,18:9,19:10,20:12,21:13,22:S,23:I,24:E,25:w,27:A,28:N,30:P,31:j,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},{4:172,6:m,7:4,8:5,9:6,10:7,11:_,12:27,13:h,16:$,17:g,18:9,19:10,20:12,21:13,22:S,23:I,24:E,25:w,27:A,28:N,30:P,31:j,34:T,35:L,39:O,49:Q,52:26,57:U,58:F,59:R,60:q,61:B,62:M,63:35,64:D,65:z,66:V,67:Y,73:C},d(H,[2,21]),{17:[1,173]},{17:[1,174]},d(H,[2,23]),d(H,[2,20])],defaultActions:{41:[2,1],46:[2,72],83:[2,77],132:[2,74],144:[2,79],160:[2,26]},parseError:function(je,Te){if(Te.recoverable)this.trace(je);else if(Te.loc&&Te.line)throw new SyntaxError(je,Te.loc,Te.line);else{var Le=new Error(je);throw Le.hash=Te,Le}},parse:function(je){var Le=this,Oe=[0],Ue=[null],Fe=[],Re=this.table,qe='',Be=0,Me=0,De=0,Ve=1,Ye=Fe.slice.call(arguments,1),Ce=Object.create(this.lexer),Ge={yy:{}};for(var He in this.yy)Object.prototype.hasOwnProperty.call(this.yy,He)&&(Ge.yy[He]=this.yy[He]);Ce.setInput(je,Ge.yy),Ge.yy.lexer=Ce,Ge.yy.parser=this,'undefined'==typeof Ce.yylloc&&(Ce.yylloc={});var Je=Ce.yylloc;Fe.push(Je);var Ke=Ce.options&&Ce.options.ranges;this.parseError='function'==typeof Ge.yy.parseError?Ge.yy.parseError:Object.getPrototypeOf(this).parseError;_token_stack:var We=function(){var dn;return dn=Ce.lex()||Ve,'number'!=typeof dn&&(dn=Le.symbols_[dn]||dn),dn};for(var Xe,Ze,en,nn,an,on,rn,sn,cn,ln={};;){if(en=Oe[Oe.length-1],this.defaultActions[en]?nn=this.defaultActions[en]:((null===Xe||'undefined'==typeof Xe)&&(Xe=We()),nn=Re[en]&&Re[en][Xe]),'undefined'==typeof nn||!nn.length||!nn[0]){var un='';for(on in cn=[],Re[en])this.terminals_[on]&&on>2&&cn.push('\''+this.terminals_[on]+'\'');un=Ce.showPosition?'Parse error on line '+(Be+1)+':\n'+Ce.showPosition()+'\nExpecting '+cn.join(', ')+', got \''+(this.terminals_[Xe]||Xe)+'\'':'Parse error on line '+(Be+1)+': Unexpected '+(Xe==Ve?'end of input':'\''+(this.terminals_[Xe]||Xe)+'\''),this.parseError(un,{text:Ce.match,token:this.terminals_[Xe]||Xe,line:Ce.yylineno,loc:Je,expected:cn})}if(nn[0]instanceof Array&&1<nn.length)throw new Error('Parse Error: multiple actions possible at state: '+en+', token: '+Xe);switch(nn[0]){case 1:Oe.push(Xe),Ue.push(Ce.yytext),Fe.push(Ce.yylloc),Oe.push(nn[1]),Xe=null,Ze?(Xe=Ze,Ze=null):(Me=Ce.yyleng,qe=Ce.yytext,Be=Ce.yylineno,Je=Ce.yylloc,0<De&&De--);break;case 2:if(rn=this.productions_[nn[1]][1],ln.$=Ue[Ue.length-rn],ln._$={first_line:Fe[Fe.length-(rn||1)].first_line,last_line:Fe[Fe.length-1].last_line,first_column:Fe[Fe.length-(rn||1)].first_column,last_column:Fe[Fe.length-1].last_column},Ke&&(ln._$.range=[Fe[Fe.length-(rn||1)].range[0],Fe[Fe.length-1].range[1]]),an=this.performAction.apply(ln,[qe,Me,Be,Ge.yy,nn[1],Ue,Fe].concat(Ye)),'undefined'!=typeof an)return an;rn&&(Oe=Oe.slice(0,2*(-1*rn)),Ue=Ue.slice(0,-1*rn),Fe=Fe.slice(0,-1*rn)),Oe.push(this.productions_[nn[1]][0]),Ue.push(ln.$),Fe.push(ln._$),sn=Re[Oe[Oe.length-2]][Oe[Oe.length-1]],Oe.push(sn);break;case 3:return!0;}}return!0}},Ne=function(){var Pe={EOF:1,parseError:function(Te,Le){if(this.yy.parser)this.yy.parser.parseError(Te,Le);else throw new Error(Te)},setInput:function(je,Te){return this.yy=Te||this.yy||{},this._input=je,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match='',this.conditionStack=['INITIAL'],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var je=this._input[0];this.yytext+=je,this.yyleng++,this.offset++,this.match+=je,this.matched+=je;var Te=je.match(/(?:\r\n?|\n).*/g);return Te?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),je},unput:function(je){var Te=je.length,Le=je.split(/(?:\r\n?|\n)/g);this._input=je+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Te),this.offset-=Te;var Oe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Le.length-1&&(this.yylineno-=Le.length-1);var Qe=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Le?(Le.length===Oe.length?this.yylloc.first_column:0)+Oe[Oe.length-Le.length].length-Le[0].length:this.yylloc.first_column-Te},this.options.ranges&&(this.yylloc.range=[Qe[0],Qe[0]+this.yyleng-Te]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError('Lexical error on line '+(this.yylineno+1)+'. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n'+this.showPosition(),{text:'',token:null,line:this.yylineno});return this},less:function(je){this.unput(this.match.slice(je))},pastInput:function(){var je=this.matched.substr(0,this.matched.length-this.match.length);return(20<je.length?'...':'')+je.substr(-20).replace(/\n/g,'')},upcomingInput:function(){var je=this.match;return 20>je.length&&(je+=this._input.substr(0,20-je.length)),(je.substr(0,20)+(20<je.length?'...':'')).replace(/\n/g,'')},showPosition:function(){var je=this.pastInput(),Te=Array(je.length+1).join('-');return je+this.upcomingInput()+'\n'+Te+'^'},test_match:function(je,Te){var Le,Oe,Qe;if(this.options.backtrack_lexer&&(Qe={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Qe.yylloc.range=this.yylloc.range.slice(0))),Oe=je[0].match(/(?:\r\n?|\n).*/g),Oe&&(this.yylineno+=Oe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Oe?Oe[Oe.length-1].length-Oe[Oe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+je[0].length},this.yytext+=je[0],this.match+=je[0],this.matches=je,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(je[0].length),this.matched+=je[0],Le=this.performAction.call(this,this.yy,this,Te,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Le)return Le;if(this._backtrack){for(var Ue in Qe)this[Ue]=Qe[Ue];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var je,Te,Le,Oe;this._more||(this.yytext='',this.match='');for(var Qe=this._currentRules(),Ue=0;Ue<Qe.length;Ue++)if(Le=this._input.match(this.rules[Qe[Ue]]),Le&&(!Te||Le[0].length>Te[0].length))if(Te=Le,Oe=Ue,this.options.backtrack_lexer){if(je=this.test_match(Le,Qe[Ue]),!1!==je)return je;if(this._backtrack){Te=!1;continue}else return!1}else if(!this.options.flex)break;return Te?(je=this.test_match(Te,Qe[Oe]),!1!==je&&je):''===this._input?this.EOF:this.parseError('Lexical error on line '+(this.yylineno+1)+'. Unrecognized text.\n'+this.showPosition(),{text:'',token:null,line:this.yylineno})},lex:function(){var Te=this.next();return Te?Te:this.lex()},begin:function(Te){this.conditionStack.push(Te)},popState:function(){var Te=this.conditionStack.length-1;return 0<Te?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Te){return Te=this.conditionStack.length-1-Math.abs(Te||0),0<=Te?this.conditionStack[Te]:'INITIAL'},pushState:function(Te){this.begin(Te)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Te,Le,Oe,Qe){switch(Oe){case 0:break;case 1:break;case 2:break;case 3:return 11;break;case 4:return 22;break;case 5:return 28;break;case 6:return 29;break;case 7:return 30;break;case 8:return 31;break;case 9:return 23;break;case 10:return 24;break;case 11:return 25;break;case 12:return 27;break;case 13:return 42;break;case 14:return 48;break;case 15:return 26;break;case 16:return 16;break;case 17:return 17;break;case 18:return 6;break;case 19:return 69;break;case 20:return 59;break;case 21:return 60;break;case 22:return 61;break;case 23:return 62;break;case 24:return 64;break;case 25:return 49;break;case 26:return 50;break;case 27:return 51;break;case 28:return 65;break;case 29:return 65;break;case 30:this.begin('DoubleQuotedString');break;case 31:this.begin('SingleQuotedString');break;case 32:this.begin('QuotedStringEscape');break;case 33:this.popState();break;case 34:this.popState();break;case 35:return this.popState(),67;break;case 36:return 66;break;case 37:return 66;break;case 38:return 73;break;case 39:return 57;break;case 40:return 58;break;case 41:return 34;break;case 42:return 35;break;case 43:return 36;break;case 44:return 37;break;case 45:return 38;break;case 46:return 43;break;case 47:return 47;break;case 48:return 46;break;case 49:return 45;break;case 50:return 44;break;case 51:return 39;break;case 52:return 40;break;case 53:return 41;break;case 54:return 13;break;case 55:return 15;break;case 56:return 55;break;case 57:return 56;break;case 58:return 5;break;case 59:return'INVALID';}},rules:[/^(?:\/\/([^\n\r]*))/,/^(?:\/\*([\u0000-\uffff]*?)\*\/)/,/^(?:\s+)/,/^(?:function\b)/,/^(?:return\b)/,/^(?:if\b)/,/^(?:else\b)/,/^(?:while\b)/,/^(?:for\b)/,/^(?:break\b)/,/^(?:continue\b)/,/^(?:let\b)/,/^(?:const\b)/,/^(?:===)/,/^(?:=>)/,/^(?:=)/,/^(?:\{)/,/^(?:\})/,/^(?:;)/,/^(?:,)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:NaN\b)/,/^(?:Infinity\b)/,/^(?:\[\])/,/^(?:\[)/,/^(?:\])/,/^(?:\.)/,/^(?:"")/,/^(?:'')/,/^(?:")/,/^(?:')/,/^(?:\\)/,/^(?:")/,/^(?:')/,/^(?:(.|\r\n|\n))/,/^(?:[^"\\]*)/,/^(?:[^'\\]*)/,/^(?:[A-Za-z_][A-Za-z0-9_]*)/,/^(?:[0-9]+(\.[0-9]+)?([eE][\-+]?[0-9]+)?\b)/,/^(?:[0-9]+\b)/,/^(?:\+)/,/^(?:-)/,/^(?:\*)/,/^(?:\/)/,/^(?:%)/,/^(?:!==)/,/^(?:<=)/,/^(?:>=)/,/^(?:<)/,/^(?:>)/,/^(?:!)/,/^(?:&&)/,/^(?:\|\|)/,/^(?:\()/,/^(?:\))/,/^(?:\?)/,/^(?::)/,/^(?:$)/,/^(?:.)/],conditions:{QuotedStringEscape:{rules:[35],inclusive:!1},SingleQuotedString:{rules:[32,34,37],inclusive:!1},DoubleQuotedString:{rules:[32,33,36],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],inclusive:!0}}};return Pe}();return Ae.lexer=Ne,u.prototype=Ae,Ae.Parser=u,new u}();return function(){return e.parse.apply(e,arguments)}}();function is_self_evaluating(e){return is_number(e)||is_string(e)||is_boolean(e)}function is_tagged_object(e,u){return is_object(e)&&e.tag===u}function is_empty_list_expression(e){return is_tagged_object(e,'empty_list')}function evaluate_empty_list_expression(){return[]}function is_name(e){return is_tagged_object(e,'name')}function name_of_name(e){return e.name}function is_constant_declaration(e){return is_tagged_object(e,'constant_declaration')}function constant_declaration_name(e){return e.name}function constant_declaration_value(e){return e.value}function evaluate_constant_declaration(e,u){return declare_constant(constant_declaration_name(e),evaluate(constant_declaration_value(e),u),u),void 0}function is_variable_declaration(e){return is_tagged_object(e,'variable_declaration')}function variable_declaration_name(e){return e.name}function variable_declaration_value(e){return e.value}function evaluate_variable_declaration(e,u){return declare_variable(variable_declaration_name(e),evaluate(variable_declaration_value(e),u),u),void 0}function is_conditional_statement(e){return is_tagged_object(e,'conditional_statement')}function conditional_statement_predicate(e){return e.predicate}function conditional_statement_consequent(e){return e.consequent}function conditional_statement_alternative(e){return e.alternative}function is_true(e){return!0===e}function is_false(e){return!is_true(e)}function evaluate_conditional_statement(e,u){return is_true(evaluate(conditional_statement_predicate(e),u))?evaluate(conditional_statement_consequent(e),u):evaluate(conditional_statement_alternative(e),u)}function is_conditional_expression(e){return is_tagged_object(e,'conditional_expression')}function conditional_expression_predicate(e){return e.predicate}function conditional_expression_consequent(e){return e.consequent}function conditional_expression_alternative(e){return e.alternative}function evaluate_conditional_expression(e,u){return is_true(evaluate(conditional_expression_predicate(e),u))?evaluate(conditional_expression_consequent(e),u):evaluate(conditional_expression_alternative(e),u)}function is_function_definition(e){return is_tagged_object(e,'function_definition')}function function_definition_parameters(e){return e.parameters}function function_definition_body(e){return e.body}function make_function_object(e,u,d){return{tag:'function_object',parameters:e,body:u,environment:d}}function is_function_object(e){return is_tagged_object(e,'function_object')}function function_object_parameters(e){return e.parameters}function function_object_body(e){return e.body}function function_object_environment(e){return e.environment}function evaluate_function_definition(e,u){return make_function_object(map(d=>is_string(d)?d:name_of_name(d),function_definition_parameters(e)),function_definition_body(e),u)}function is_boolean_operation(e){return is_tagged_object(e,'boolean_operation')}function evaluate_boolean_operation(e,u){return'&&'===operator(e)?!!is_true(evaluate(first_operand(operands(e)),u))&&evaluate(first_operand(rest_operands(operands(e))),u):!!is_true(evaluate(first_operand(operands(e)),u))||evaluate(first_operand(rest_operands(operands(e))),u)}function is_sequence(e){return is_list(e)}function is_empty_sequence(e){return is_empty_list(e)}function is_last_statement(e){return is_empty_list(tail(e))}function first_statement(e){return head(e)}function rest_statements(e){return tail(e)}function evaluate_sequence(e,u){if(is_last_statement(e))return evaluate(first_statement(e),u);const d=evaluate(first_statement(e),u);return is_return_value(d)?d:evaluate_sequence(rest_statements(e),u)}function is_application(e){return is_tagged_object(e,'application')}function operator(e){return e.operator}function operands(e){return e.operands}function no_operands(e){return is_empty_list(e)}function first_operand(e){return head(e)}function rest_operands(e){return tail(e)}function is_builtin_function(e){return is_tagged_object(e,'builtin')}function builtin_implementation(e){return e.implementation}function make_builtin_function(e){return{tag:'builtin',implementation:e}}function apply_builtin_function(e,u){return apply_in_underlying_javascript(builtin_implementation(e),u)}function apply(e,u){if(is_builtin_function(e))return apply_builtin_function(e,u);if(is_function_object(e)){const d=evaluate(function_object_body(e),extend_environment(function_object_parameters(e),u,function_object_environment(e)));return is_return_value(d)?return_value_content(d):void 0}error('Unknown function type in apply: '+e)}function is_return_statement(e){return is_tagged_object(e,'return_statement')}function return_statement_expression(e){return e.expression}function make_return_value(e){return{tag:'return_value',content:e}}function is_return_value(e){return is_tagged_object(e,'return_value')}function return_value_content(e){return e.content}function evaluate_return_statement(e,u){return make_return_value(evaluate(return_statement_expression(e),u))}function is_block(e){return is_tagged_object(e,'block')}function block_body(e){return e.body}function make_block(e){return{tag:'block',body:e}}function evaluate_block(e,u){return evaluate(block_body(e),extend_environment([],[],u))}function is_assignment(e){return is_tagged_object(e,'assignment')}function assignment_name(e){return e.name.name}function assignment_right_hand_side(e){return e.value}function evaluate_assignment(e,u){const d=evaluate(assignment_right_hand_side(e),u);return assign_name_to_value(assignment_name(e),d,u),d}function is_while_loop(e){return is_tagged_object(e,'while_loop')}function while_loop_predicate(e){return e.predicate}function while_loop_statements(e){return e.statements}function make_while_loop(e,u){return{tag:'while_loop',predicate:e,statements:u}}function evaluate_while_loop(e,u){const d=evaluate(while_loop_predicate(e),u);return!d||(evaluate(while_loop_statements(e),u),evaluate_while_loop(e,u))}function is_for_loop(e){return is_tagged_object(e,'for_loop')}function for_loop_initialiser(e){return e.initialiser}function for_loop_predicate(e){return e.predicate}function for_loop_finaliser(e){return e.finaliser}function for_loop_statements(e){return e.statements}function evaluate_for_loop(e,u){const d=make_block(list(for_loop_initialiser(e),make_while_loop(for_loop_predicate(e),make_block(append(block_body(for_loop_statements(e)),list(for_loop_finaliser(e)))))));return evaluate(d,u)}const an_empty_frame={};function make_frame(e,u){const d={};for(;!is_empty_list(e)&&!is_empty_list(u);)add_binding_to_frame(head(e),head(u),d,!0),e=tail(e),u=tail(u);return d}function make_denoted(e,u){return{mutable:u,value:e}}function add_binding_to_frame(e,u,d,g){return d[e]=make_denoted(u,g),void 0}function has_binding_in_frame(e,u){return u[e]!==void 0}function first_frame(e){return head(e)}function declare_constant(e,u,d){const g=first_frame(d);return add_binding_to_frame(e,u,g,!1)}function declare_variable(e,u,d){const g=first_frame(d);return add_binding_to_frame(e,u,g,!0)}function enclosing_environment(e){return tail(e)}function enclose_by(e,u){return pair(e,u)}function is_empty_environment(e){return is_empty_list(e)}function lookup_name_value(e,u){function d(g){return is_empty_environment(g)?void error('Unbound name: '+e):has_binding_in_frame(e,first_frame(g))?first_frame(g)[e].value:d(enclosing_environment(g))}return d(u)}function assign_name_to_value(e,u,d){function g(m){if(is_empty_environment(m))error('Unbound name: '+e);else if(has_binding_in_frame(e,first_frame(m)))first_frame(m)[e].value=u;else return g(enclosing_environment(m))}return g(d)}function extend_environment(e,u,d){return length(e)===length(u)?enclose_by(make_frame(e,u),d):void(length(e)<length(u)?error('Too many arguments supplied: '+e+u):error('Too few arguments supplied: '+e+u))}function list_of_values(e,u){return no_operands(e)?[]:pair(evaluate(first_operand(e),u),list_of_values(rest_operands(e),u))}function evaluate(e,u){if(is_self_evaluating(e))return e;return is_empty_list_expression(e)?evaluate_empty_list_expression(e):is_name(e)?lookup_name_value(name_of_name(e),u):is_constant_declaration(e)?evaluate_constant_declaration(e,u):is_variable_declaration(e)?evaluate_variable_declaration(e,u):is_conditional_statement(e)?evaluate_conditional_statement(e,u):is_conditional_expression(e)?evaluate_conditional_expression(e,u):is_boolean_operation(e)?evaluate_boolean_operation(e,u):is_function_definition(e)?evaluate_function_definition(e,u):is_sequence(e)?evaluate_sequence(e,u):is_application(e)?apply(evaluate(operator(e),u),list_of_values(operands(e),u)):is_return_statement(e)?evaluate_return_statement(e,u):is_block(e)?evaluate_block(e,u):is_assignment(e)?evaluate_assignment(e,u):is_while_loop(e)?evaluate_while_loop(e,u):is_for_loop(e)?evaluate_for_loop(e,u):void error('Unknown expression type in evaluate: '+stringify(e))}function evaluate_toplevel(e,u){const d=evaluate(e,u);return is_return_value(d)?void error('return not allowed outside of function definitions'):d}function make_empty_frame(){return{}}const the_empty_environment=[],builtin_functions=list(pair('pair',pair),pair('head',head),pair('tail',tail),pair('list',list),pair('is_empty_list',is_empty_list),pair('display',display),pair('error',error),pair('+',(e,u)=>e+u),pair('-',(e,u)=>e-u),pair('*',(e,u)=>e*u),pair('/',(e,u)=>e/u),pair('%',(e,u)=>e%u),pair('===',(e,u)=>e===u),pair('!==',(e,u)=>e!==u),pair('<',(e,u)=>e<u),pair('<=',(e,u)=>e<=u),pair('>',(e,u)=>e>u),pair('>=',(e,u)=>e>=u),pair('!',e=>!e)),builtin_values=list(pair('undefined',void 0),pair('math_PI',Math.PI));function setup_global_environment(){const e=enclose_by(make_empty_frame(),the_empty_environment);return for_each(u=>declare_constant(head(u),make_builtin_function(tail(u)),e),builtin_functions),for_each(u=>declare_constant(head(u),tail(u),e),builtin_values),e}const the_global_environment=setup_global_environment();function parse_and_evaluate(e){return evaluate_toplevel(parse(e),the_global_environment)}`;
const hide_impl = function(fn) { fn.bind(); return function() { return fn.apply(null, arguments) } };

var getcontext = (function(fixup) {
    var contexts = new Map();
    return (function(key) {
        let ctx;
        if (!contexts.has(key) || contexts.get(key).context['RESET ME'] === true) {
            ctx = {
                context: vm.createContext({}),
                buf: ""
            };
            contexts.set(key, ctx);
        } else {
            ctx = contexts.get(key);
        }
        ctx.context = fixup(ctx.context);
        return ctx;
    });
})(function(context) {
    return Object.assign(context, {
        console: console,
        module: module,
        process: process,
        require: require,
        load_source: hide_impl(function() {
            vm.runInContext(srclib, context, { filename: 'srclib' });
            const objs = Object.getOwnPropertyNames(Math)
            for (const i in objs) {
                if (objs.hasOwnProperty(i)) {
                    const val = objs[i];
                    if (typeof Math[val] === 'function') {
                        context['math_' + val] = Math[val].bind();
                    } else {
                        context['math_' + val] = Math[val];
                    }
                }
            }
        }),
        reset: hide_impl(function() {
            context['RESET ME'] = true;
        })
    });
});
var stdout;
var callback = function(data) {
    stdout += data;
};

function respond(msg) {
    var conn = conns[msg.nonce];
    delete conns[msg.nonce];
    var outbuf = Buffer.allocUnsafe(4);
    outbuf.writeInt32LE(Buffer.byteLength(msg.result, 'utf8'), 0);
    conn.write(outbuf);
    conn.write(msg.result, 'utf8');
    conn.end();
}

function handle_request(message) {
    var finished = true;
    var ctx = getcontext(message.key);
    ctx.buf += message.code;
    stdout = "";
    try {
        var out = vm.runInContext(ctx.buf, ctx.context, {
            filename: 'stdin'
        });
        if (typeof out !== "undefined") {
            stdout += util.inspect(out);
        }
    } catch(err) {
        // FIXME hack hack hack
        if (err.name === "SyntaxError" && err.message === "Unexpected end of input") {
            finished = false;
        } else {
            stdout += err.toString() + "\n" + err.stack;
        }
    }
    if (finished) {
        ctx.buf = "";
    }

    respond({result: finished ? stdout : "(continue...)", nonce: message.nonce});
}

var server = net.createServer(conn => {
    var data = Buffer.allocUnsafe(0);
    conn.on('data', function(chunk) {
        data = Buffer.concat([data, chunk]);
        var key_len = 0;
        var code_len = 0;
        if (data.length >= 12
            && data.length >= 12 +
                (key_len = data.readInt32LE(4)) +
                (code_len = data.readInt32LE(8))) {
            var nonce = ctr++;
            conns[nonce] = conn;
            handle_request({
                timeout: data.readInt32LE(0),
                key: data.toString('utf8', 12, 12 + key_len),
                code: data.toString('utf8', 12 + key_len, 12 + key_len + code_len),
                nonce: nonce
            });
        }
    });
});

process.stdout.write = (function(write) {
    return function(string, encoding, fd) {
        callback.call(callback, string);
    };
}(process.stdout.write));
process.stderr.write = (function(write) {
    return function(string, encoding, fd) {
        callback.call(callback, string);
    };
}(process.stderr.write));

server.listen({ fd: 3 });
